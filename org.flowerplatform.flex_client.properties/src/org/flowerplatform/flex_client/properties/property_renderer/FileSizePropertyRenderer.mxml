<?xml version="1.0" encoding="utf-8"?>
<!---
@author Sebastian Solomon
@author Cristina Constantinescu
-->
<ns:BasicPropertyRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
						  xmlns:s="library://ns.adobe.com/flex/spark" 
						  xmlns:mx="library://ns.adobe.com/flex/mx" 
						  xmlns:ns="org.flowerplatform.flex_client.properties.property_renderer.*" creationComplete="creationCompleteHandler(event)">
	
	<fx:Script>
		<![CDATA[
			import mx.binding.utils.BindingUtils;
			import mx.events.FlexEvent;

			protected function creationCompleteHandler(event:FlexEvent):void {
				BindingUtils.bindSetter(updateSize, data, "value");
			}
			
			private function updateSize(newValue:Object):void {				
				if (newValue == null) {
					propertyValue.text = "0 bytes";
					return;
				}
				var size:Number = Number(newValue);
				var unit:Array = [' bytes', ' KB', ' MB', ' GB', ' TB'];
				var index:uint = Math.floor(Math.log(size)/Math.log(1024));
				if (index == 0) {
					propertyValue.text = size + unit[index];
				} else {
					propertyValue.text = (size/Math.pow(1024, index)).toFixed(2) + unit[index];
				}
			}
			
			override protected function getValue():Object {
				return propertyValue.text;	
			}
			
		]]>
	</fx:Script>
	
	<s:TextInput id="propertyValue"  width="100%" height="100%" editable="false" />
	
</ns:BasicPropertyRenderer>
