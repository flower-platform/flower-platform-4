<?xml version="1.0" encoding="UTF-8"?>
<services-config>

    <services>
		<service id="remoting-service" class="org.flowerplatform.flex_client.server.blazeds.FlowerRemotingService"/>
	</services>
	
	<factories>
		<factory id="flowerFactory"
			class="org.flowerplatform.flex_client.server.blazeds.FlowerFlexFactory" />
	</factories>
	
   	<!-- For more details about channel definition configuration check http://livedocs.adobe.com/livecycle/8.2/programLC/programmer/lcds/help.html?content=lcconfig_3.html. -->
    <channels>
        <channel-definition id="remoting-amf" class="mx.messaging.channels.AMFChannel">
            <endpoint url="http://{server.name}:{server.port}/{context.root}/messagebroker/remoting-amf" class="flex.messaging.endpoints.AMFEndpoint"/>
            <properties>
                <polling-enabled>false</polling-enabled>
				<serialization>
					<log-property-errors>true</log-property-errors>
				</serialization>
            </properties>
        </channel-definition>
    </channels>
    
    <logging>
        <target class="flex.messaging.log.ServletLogTarget" level="Warn"> <!-- Other options : Debug, All, Warn -->
            <properties>
                <prefix>[BlazeDS Flower Web] </prefix>
                <includeDate>false</includeDate>
                <includeTime>false</includeTime>
                <includeLevel>false</includeLevel>
                <includeCategory>true</includeCategory>
            </properties>
            <filters>
				<pattern>*</pattern>
                <pattern>Endpoint.*</pattern>
                <pattern>Service.*</pattern>
                <pattern>Configuration</pattern>
            </filters>
        </target>
    </logging>
    
    <security>
		<!-- This object will be responsible for authorization and authentication 
			on server side. -->
		<login-command class="org.flowerplatform.flex_client.server.blazeds.FlowerLoginCommand"
			server="all">
			<!-- Based on this property, multiple users can be logged into the system, 
				using the same browser and more tabs. If true when opening a new tab, the 
				session is not shared with the other tab. More informations can be found 
				at http://livedocs.adobe.com/blazeds/1/blazeds_devguide/help.html?content=services_security_5.html 
				We keep it true because otherwise logging out from a tab made also a logout 
				on a different tab in the same browser. -->
			<per-client-authentication>false</per-client-authentication>
		</login-command>
		<security-constraint id="tomcatSecurityConstraint">
			<!-- The Custom value is used in order to use the Flex's application authentication 
				and not the Browser's authentication. More details in http://livedocs.adobe.com/blazeds/1/blazeds_devguide/help.html?content=services_security_2.html. -->
			<auth-method>Custom</auth-method>
		</security-constraint>
	</security>	
	
</services-config>
