<?xml version="1.0" encoding="utf-8"?>
<ns:BasicViewContent xmlns:fx="http://ns.adobe.com/mxml/2009" 
					 xmlns:s="library://ns.adobe.com/flex/spark" 
					 xmlns:mx="library://ns.adobe.com/flex/mx" 
					 xmlns:ns="org.flowerplatform.flexutil.view_content_host.*">
	
	<fx:Script>
		<![CDATA[
			import flash.events.Event;
			
			import org.flowerplatform.flex_client.core.CorePlugin;
			import org.flowerplatform.flex_client.core.editor.remote.Node;
			
			import spark.events.TextOperationEvent;
			
			[Bindable]
			public var repo:String;
			
			override protected function okHandler(event:Event=null):void {
				CorePlugin.getInstance().serviceLocator.invoke("structureDiffService.createStructureDiff", 
					[patch.text, path.text],
					function(node:Node):void {
						CorePlugin.getInstance().openEditor(node);
						cancelHandler();
					});
			}
			
		]]>
	</fx:Script>
	
	<s:TextArea id="patch" width="100%" height="100%"/>
	
	<s:HGroup width="100%" verticalAlign="middle" gap="5">
		<s:Label text="File Name"/>
		<s:TextInput id="filename" text="Untitled"/>
		<s:Label id="path" text="{repo + '|sdiffs/' + filename.text + '.sdiff'}" fontWeight="bold"/>
	</s:HGroup>
	
</ns:BasicViewContent>
