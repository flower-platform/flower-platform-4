<?xml version="1.0" encoding="utf-8"?>
<!-- 
 @author Tita Andreea 
-->
<ns:BasicViewContent xmlns:fx="http://ns.adobe.com/mxml/2009" 
					 xmlns:s="library://ns.adobe.com/flex/spark" 
					 xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:ns="org.flowerplatform.flexutil.view_content_host.*"
					 creationComplete="creationCompleteHandler(event)">
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			
			import org.flowerplatform.flex_client.core.CoreConstants;
			import org.flowerplatform.flex_client.core.CorePlugin;
			import org.flowerplatform.flex_client.core.editor.remote.Node;
			import org.flowerplatform.flex_client.resources.Resources;
			import org.flowerplatform.flexutil.FlexUtilGlobals;
		
			public var node:Node;
			
			override protected function creationCompleteHandler(event:FlexEvent):void {
				newBranchName.text = node.getPropertyValue(CoreConstants.NAME);
				okButton.enabled = true;
			}
			
			override protected function okHandler(event:Event = null):void {
				if(newBranchName.text == "") {
					FlexUtilGlobals.getInstance().messageBoxFactory.createMessageBox()
						.setTitle(Resources.getMessage('flex_client.team.git.ui.renameBranchView.error'))
						.setText(Resources.getMessage('flex_client.team.git.ui.renameBranchView.alert'))
						.setHeight(150)
						.setWidth(250)
						.showMessageBox(true);
				} else {
					var newName:String = newBranchName.text;
					CorePlugin.getInstance().serviceLocator.invoke("GitService.renameBranch", [node.parent.nodeUri, node.nodeUri, newName]);
					cancelHandler();
				}
			}	
		]]>
	</fx:Script>

	<s:Form width="100%">
		<s:FormItem label="{Resources.getMessage('flex_client.team.git.ui.renameBranchView.newBranchName')}" >
			<s:TextInput id="newBranchName" width="100%" />
		</s:FormItem>
	</s:Form>
	
</ns:BasicViewContent>
